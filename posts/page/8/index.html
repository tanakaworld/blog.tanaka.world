<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | For X Developers</title><meta name=keywords content><meta name=description content="Memorandom for me and &#34;X&#34; developers in the world."><meta name=author content><link rel=canonical href=https://blog.tanaka.world/posts/><link href=/assets/css/stylesheet.min.2a79645f388444ef452f62dadbadeebdfebba13b08d1b841a7504a7be022e74d.css integrity="sha256-KnlkXziERO9FL2La263uvf67oTsI0bhBp1BKe+Ai500=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.tanaka.world/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://blog.tanaka.world/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://blog.tanaka.world/favicon.png><link rel=apple-touch-icon href=https://blog.tanaka.world/favicon.png><link rel=mask-icon href=https://blog.tanaka.world/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><link rel=alternate type=application/rss+xml href=https://blog.tanaka.world/posts/index.xml><link rel=alternate hreflang=en href=https://blog.tanaka.world/en/posts/><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-122034388-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="Posts"><meta property="og:description" content="Memorandom for me and &#34;X&#34; developers in the world."><meta property="og:type" content="website"><meta property="og:url" content="https://blog.tanaka.world/posts/"><meta property="og:image" content="https://blog.tanaka.world/favicon.png"><meta property="og:updated_time" content="2021-02-28T21:40:53+09:00"><meta property="og:site_name" content="For X Developers"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.tanaka.world/favicon.png"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Memorandom for me and &#34;X&#34; developers in the world."></head><body class=list id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://blog.tanaka.world accesskey=h title="For X Developer (Alt + H)"><img src=/favicon.png alt=logo aria-label=logo height=35>For X Developer</a>
<span class=logo-switches><span class=theme-toggle title="(Alt + T)"><a id=theme-toggle accesskey=t><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span><span class=lang-switch><span>|</span><ul><li><a href=https://blog.tanaka.world/en/ title=English aria-label=English>En</a></li></ul></span></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://blog.tanaka.world/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://tanaka.world/about title=Author><span>Author</span></a></li><li><a href=https://blog.tanaka.world/index.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>コードレスクリーナーを買った</h2></header><section class=entry-content><p>8月に発売された東芝の VC-CL1500 というモデルの，1世代前の商品 VC-CL1400 を購入した． 型落ちなので値段もお手頃だった．
コードレスクリーナー VC-CL1500／VC-CL500
スペック ハイスピードDCモーターHD25 毎分最大 約 110,000回転 (Dysonにも劣らないらしい) サイクロン部のフィルタがない サイクロン手前のフィルタ掃除は時々でOK ゴミ捨てがカンタン(自走式) 片手で楽に操作可能 20分連続可動 前方巻き込み式 +α アタッチメント 前方巻き込み式
一番良かったのは「前方巻き込み式」な点．巻き込み式でない場合，部屋の隅に溜まったゴミがとれるかどうかが違う． 掃除機は当たっているはずなのにゴミが残っているという経験したことないだろうか．これは掃除機の真下部分のゴミしか吸引してくれないタイプでよく起こる問題で，見た目はゴミに当たっているようでも吸引場所まで届いていないのが，原因らしい． その点，実際に試したところ抜群に吸引してくれて，それだけで買いそうになった．
自走式
“自走式” なのも地味に違いを感じた． 片手で軽く持っているだけで勝手に前に進んでくれる．自動式でないモデルと並行で試すと違いが歴然．特にカーペットの上とか物理的に摩擦が起きやすいところでもスッと進むのはかなり楽．
以前，エレクトロラックス製のコードレスクリーナーを使っていたことがある． デザインかっこいいしハンディにもなるしよさそう，と思って買ったが，物足りず売ってしまった過去がある．“ハンディになる” というのはハンディレベルの吸引力のマシンをスタンディングで使えるようにしているということらしい．上記の良い点も全くカバーされていなかった．．．
クイックルワイパー + コロコロで事足りる派 だったのだが，引っ越して事情が変わった．
ソファーの隅 カーペット 部屋の隅 その他，手が届かないところ 引っ越して半年，これらのゴミが気になりだした．クイックルワイパーは優れものだが，ヘッドの形的に手が届かないところも多い．ヘッドからシートを外して手で掃除していたが，部屋も広く大変だった．週1まとめて掃除する頻度でも大変だったので，掃除機は必然になってきていた．
てか，コロコロの正式名称は「粘着カーペットクリーナー」というらしい笑．株式会社ニトムズという生活消費財関連を扱う会社が，商標出願もしていて出願から33年も経っている．ニトムズ＝NITTO HOME PRODUCTS
Dyson は買わなかった 掃除機の性能は，モーターの回転数で決まるらしい．“吸引力が変わらない” というのがウリの Dyson のやつも検討していたが，東芝のこのモデルも回転数的には負けず劣らずだった．実際にそれぞれ体験してみたところ，本体の軽さや性能・付属品含め東芝の方で全く問題なかった．
Dyson 製品は
本体が重い イギリス人の体型をペルソナにしていて，やや大きい というのがネックだった．
なお，コードレスでないモデルの方が，Dyson のコードレスクリーナーより，吸引力は圧倒的に強いらしい．一軒家とか部屋がとても広いケースだとバッテリーの持続時間も考慮してコードありの方がよいと思う．...</p></section><footer class=entry-footer>August 26, 2018</footer><a class=entry-link aria-label="post link to コードレスクリーナーを買った" href=https://blog.tanaka.world/toshiba-vacuum-cleaner/></a></article><article class=post-entry><header class=entry-header><h2>Base64 エンコードされた PDF ファイルをブラウザで扱う</h2></header><section class=entry-content><p>諸々の事情で，Base64 化されたファイル文字列をブラウザで復元して扱いたいケースがあり，そのとき検証した作業ログ．画像と PDF データを扱う．
画像ファイルの場合 Base64 エンコードされた画像データは，&lt;img> タグの src に指定することができる．
Data URLs の形式で，次のように記述する．
&lt;!-- data:[&lt;mediatype>][;base64],&lt;data> --> &lt;img src="data:image/png;base64,R0lGODlhAQABAIAA•••"/> PDF ファイルの場合 PDF データは，Blob に変換した後，ファイル URL を取得しアクセスすると表示できる．
const base64Str = 'JVBERi0xLjMNCiXi48/TDQoNCjE•••'; const file = new Blob([atob(base64Str)], { type: 'application/pdf' }); const fileURL = URL.createObjectURL(file); window.open(fileURL); と，思ったが正常に表示できるケースと，表示されないケースがあり，原因がわからず．． 具体的には，枠は表示されるが内容が真っ白になってしまうという状況．
pdf.js を使う Mozilla 製の pdf.js を使うと正常に表示できた． pdf.js には viewer もついているが，.pdf ファイルの実態が必要になるので使わず，今回はファイル内容を直接扱っている．
ビルド済みのパッケージ pdfjs-dist を使う．
.getDocument で Bae64 化されたファイルを読み込み，pdfDoc.getPage(1).render() でファイル内容をレンダリングする．この例は，1ページだけレンダリングするが，pdfDoc.numPages で得られるページ数分描画すれば複数ファイル内容を一度に表示可能．
import PDFJS from 'pdfjs-dist'; const base64Str = 'JVBERi0xLjMNCiXi48/TDQoNCjE•••'; const canvasContainer = document....</p></section><footer class=entry-footer>August 25, 2018</footer><a class=entry-link aria-label="post link to Base64 エンコードされた PDF ファイルをブラウザで扱う" href=https://blog.tanaka.world/pdf-on-browser/></a></article><article class=post-entry><header class=entry-header><h2>Vue.js と At.js を組み合わせる</h2></header><section class=entry-content><p>jQuery 製の AutoComplete を提供する At.js を，Vue のコンポーネントと組み合わせて使ったときのメモ．
完成イメージ 完成版ソースコードはこちら．
At.js を使うと次のような挙動が実現できる．WYSIWYG 内で @ を入力すると，入力候補が一覧が表示され，選択すると任意の要素が追加できる．
vue-at は使わなかった At.js の Vue 版 vue-at もあるが，At.js の全機能に対応していなかった．(検証当時) 具体的には insertTpl で挿入する HTML を定義する機能が正式リリースされておらず，結局は jQuery 版をそのまま使うことにした．
ベースとなる WYSIWYG コンポーネント contenteditable で WYSIWYG を自作する．
&lt;template> &lt;div> &lt;div class="WYSIWYG" contenteditable="true" @focus="handleFocus" v-html="content">&lt;/div> &lt;/div> &lt;/template> &lt;script> export default { props: { value: { type: String, default: '' }, disabled: { type: Boolean, default: false } }, data() { return { content: this....</p></section><footer class=entry-footer>August 16, 2018</footer><a class=entry-link aria-label="post link to Vue.js と At.js を組み合わせる" href=https://blog.tanaka.world/vue-wysiwyg-editor-with-atjs/></a></article><article class=post-entry><header class=entry-header><h2>Rails でユーザー毎に OGP 画像を自動生成するハンズオン</h2></header><section class=entry-content><p>ユーザーの詳細ページがある Web アプリケーションで，ユーザー毎に OGP 画像を自動生成し表示させてみる．
完成版のソースコードはこちら 👉 rails_ogp_generator_sample．
前提条件 Ruby 2.4.2 Rails 5.1.6 RMagic 2.16.0 Gem 画像生成で rmagic，アップロードに carrierwave を使う．
# Gemfile gem 'rmagick' gem 'carrierwave' $ bundle install User の Scaffold を作成 name と avatar を持つユーザーの Scaffold を作成する．
$ bundle exec rails g scaffold User name:string avatar:text # db/migrate/20180720144053_create_users.rb class CreateUsers &lt; ActiveRecord::Migration[5.1] def change create_table :users do |t| t.string :name, null: false t.text :avatar t.timestamps end end end $ bundle exec rails db:migrate UserOgpImage モデルを作成 User の OGP 画像を保持するモデルを作成する．...</p></section><footer class=entry-footer>August 8, 2018</footer><a class=entry-link aria-label="post link to Rails でユーザー毎に OGP 画像を自動生成するハンズオン" href=https://blog.tanaka.world/rails-generate-ogp/></a></article><article class=post-entry><header class=entry-header><h2>Emacs の設定を見直しした</h2></header><section class=entry-content><p>普段の開発は IntelliJ 製品をメインでつかっている．JavaScript/Nodejs や Ruby 系の開発が多く，WebStorm・RubyMine をかれこれ 5 年くらい使っている．一方，Python や Go 使ったり，このブログをかくときは Emacs を使っているが，ちゃんと設定せず使っていてツラみだったので，設定を見直しした．
先に述べておくと，自分の Emacs に対するこだわりやスキルは初心者と言っても過言ではなく，これらがベストだとは思っていない．他のやり方でもそれできるじゃん，というのは多々あると思う．かれこれ何回か Emacs の設定をイジっては挫折してきたけれど，これらの設定で落ち着いてきた．
環境 開発環境は次の通り． Emacs はデフォルトで入っているのが，バージョン 24 系だった．ちゃんと使い始めるなら最新版にしたかったので brew install emacs でインストールした．
macOS High Sierra 10.13.5 Mac Book Pro (15-inch, 2016) US Keyboard (改良版, 改良版のバタフライキーボード，何回か修理に出したため，幸い最新版になっている，最新版は Option キーにオプションマークがついている) GNU Emacs 26.1 straight.el でパッケージ管理 パッケージ管理を Cask から straight.el に乗り換えた．
straight.el: next-generation, purely functional package manager for the Emacs hacker.
Emacs 系のパッケージマネージャーの中では最新で更新も活発な模様． Note: straight....</p></section><footer class=entry-footer>July 31, 2018</footer><a class=entry-link aria-label="post link to Emacs の設定を見直しした" href=https://blog.tanaka.world/emacs-2018/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://blog.tanaka.world/posts/page/7/>« 前のページ</a>
<a class=next href=https://blog.tanaka.world/posts/page/9/>次のページ »</a></nav></footer></main><footer class=footer><span>&copy; 2021 <a href=https://blog.tanaka.world>For X Developers</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>