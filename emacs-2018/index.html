<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Emacs の設定を見直しした | For X Developers</title><meta name="description" content="Emacs の設定を見直しした - tanakaworld"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><meta name="description" content="普段の開発は IntelliJ 製品をメインでつかっている．JavaScript&#x2F;Nodejs や Ruby 系の開発が多く，WebStorm・RubyMine をかれこれ 5 年くらい使っている．一方，Python や Go 使ったり，このブログをかくときは Emacs を使っているが，ちゃんと設定せず使っていてツラみだったので，設定を見直しした． 先に述べておくと，自分の Emacs に対する">
<meta name="keywords" content="emacs,ide">
<meta property="og:type" content="article">
<meta property="og:title" content="Emacs の設定を見直しした">
<meta property="og:url" content="https:&#x2F;&#x2F;blog.tanaka.world&#x2F;emacs-2018&#x2F;index.html">
<meta property="og:site_name" content="For X Developers">
<meta property="og:description" content="普段の開発は IntelliJ 製品をメインでつかっている．JavaScript&#x2F;Nodejs や Ruby 系の開発が多く，WebStorm・RubyMine をかれこれ 5 年くらい使っている．一方，Python や Go 使ったり，このブログをかくときは Emacs を使っているが，ちゃんと設定せず使っていてツラみだったので，設定を見直しした． 先に述べておくと，自分の Emacs に対する">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;blog.tanaka.world&#x2F;favicon.png">
<meta property="og:updated_time" content="2020-12-25T03:35:42.648Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;blog.tanaka.world&#x2F;favicon.png"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.tanaka.world/atom.xml" title="For X Developers"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"><h1 class="title">For X Developers</h1></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://tanaka.world/about" target="_blank" class="nav-list-link">AUTHOR</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Emacs の設定を見直しした</h1><div class="post-info">Jul 31, 2018<div class="tags-list"><div class="tags-list-item"><a href="/tags/emacs/" class="tags-list-item-link">#emacs</a></div><div class="tags-list-item"><a href="/tags/ide/" class="tags-list-item-link">#ide</a></div></div></div><div class="post-content"><p>普段の開発は IntelliJ 製品をメインでつかっている．JavaScript/Nodejs や Ruby 系の開発が多く，WebStorm・RubyMine をかれこれ 5 年くらい使っている．一方，Python や Go 使ったり，このブログをかくときは Emacs を使っているが，ちゃんと設定せず使っていてツラみだったので，設定を見直しした．</p>
<p>先に述べておくと，自分の Emacs に対するこだわりやスキルは初心者と言っても過言ではなく，これらがベストだとは思っていない．他のやり方でもそれできるじゃん，というのは多々あると思う．かれこれ何回か Emacs の設定をイジっては挫折してきたけれど，これらの設定で落ち着いてきた．</p>
<h2 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h2><p>開発環境は次の通り．<br>Emacs はデフォルトで入っているのが，バージョン 24 系だった．ちゃんと使い始めるなら最新版にしたかったので <code>brew install emacs</code> でインストールした．</p>
<ul>
<li>macOS High Sierra <code>10.13.5</code></li>
<li>Mac Book Pro (15-inch, 2016) </li>
<li>US Keyboard (改良版, 改良版のバタフライキーボード，<a href="https://blog.tanaka.world/apple-official-keyboard-service-program/">何回か修理に出した</a>ため，幸い最新版になっている，最新版は Option キーにオプションマークがついている)</li>
<li>GNU Emacs <code>26.1</code></li>
</ul>
<h2 id="straight-el-でパッケージ管理"><a href="#straight-el-でパッケージ管理" class="headerlink" title="straight.el でパッケージ管理"></a>straight.el でパッケージ管理</h2><p>パッケージ管理を Cask から <a href="https://github.com/raxod502/straight.el" target="_blank" rel="noopener">straight.el</a> に乗り換えた．</p>
<blockquote>
<p>straight.el: next-generation, purely functional package manager for the Emacs hacker.</p>
</blockquote>
<p>Emacs 系のパッケージマネージャーの中では最新で更新も活発な模様．<br><code>Note: straight.el supports a minimum version of Emacs 24.4, and works on macOS, Windows, and most flavors of Linux.</code> とあるが， Emacs 26.1 でも今のところ，何も支障はない．</p>
<p><code>.emacs.d/init.el</code> に<a href="https://github.com/raxod502/straight.el#getting-started" target="_blank" rel="noopener">これ</a>だけ記述すればOK!というシンプルさが，個人的には嬉しかった点．<br>記述後，Emacs 起動に若干時間がかかる．</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(straight-use-package &apos;company)</span><br></pre></td></tr></table></figure>

<p>という記述で，インストールされていない場合に限り，MELPA, GNU ELPA, or EmacsMirror などのパッケージホストから自動でダウンロード＆インストールされる．（Emacs 起動時）<br>パッケージは <code>.emacs.d/straight/repos</code> 以下に入る．<a href="https://nukosuke.hatenablog.jp/entry/straight-el" target="_blank" rel="noopener">Emacsパッケージマネージャ決定版：これからのパッケージ管理はstraight.elで決まり！</a>辺りが詳しく解説している．</p>
<p>※ この初回起動で <code>init.el</code> などでエラーがあると，設定が正常に完了しないことがある．例えば MELPA などのパッケージホストの設定が完了せず， パッケージの自動ダウンロードが Not Found でエラーになる． <code>init.el</code> のエラーを解消後，一度 <code>.emacs.d/straight</code> を削除してから Emacs を起動すると再度セットアップされた．</p>
<h2 id="Basic-Settings"><a href="#Basic-Settings" class="headerlink" title="Basic Settings"></a>Basic Settings</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">;; UTF-8</span><br><span class="line">(prefer-coding-system &apos;utf-8)</span><br><span class="line">;;; Disable *.~</span><br><span class="line">(setq make-backup-files nil)</span><br><span class="line">;;; Diable .#*</span><br><span class="line">(setq auto-save-default nil)</span><br><span class="line">;; column / line</span><br><span class="line">(column-number-mode t)</span><br><span class="line">(global-linum-mode t)</span><br><span class="line">(setq linum-format &quot;%4d \u2502&quot;)</span><br><span class="line">;; show full path in the titlebar</span><br><span class="line">(setq frame-title-fomat &quot;%f&quot;)</span><br><span class="line">;; tab</span><br><span class="line">(setq-default tab-width 4)</span><br><span class="line">;; startup message</span><br><span class="line">(setq inhibit-startup-message t)</span><br><span class="line">;; color of background</span><br><span class="line">(set-face-background &apos;default &quot;black&quot;)</span><br><span class="line">(set-face-foreground &apos;default &quot;green&quot;)</span><br><span class="line">;; color of selected</span><br><span class="line">(set-face-background &apos;region &quot;white&quot;)</span><br><span class="line">(set-face-foreground &apos;region &quot;black&quot;)</span><br><span class="line">;; pareable brackets</span><br><span class="line">(show-paren-mode t)</span><br><span class="line">;; move multi window</span><br><span class="line">(global-set-key (kbd &quot;C-x &lt;left&gt;&quot;)  &apos;windmove-left)</span><br><span class="line">(global-set-key (kbd &quot;C-x &lt;down&gt;&quot;)  &apos;windmove-down)</span><br><span class="line">(global-set-key (kbd &quot;C-x &lt;up&gt;&quot;)    &apos;windmove-up)</span><br><span class="line">(global-set-key (kbd &quot;C-x &lt;right&gt;&quot;) &apos;windmove-right)</span><br><span class="line">;; window opacity</span><br><span class="line">(set-frame-parameter nil &apos;alpha 75)</span><br><span class="line">;; C-h is backspace</span><br><span class="line">(global-set-key &quot;\C-h&quot; &apos;delete-backward-char)</span><br></pre></td></tr></table></figure>

<h2 id="Used-packages"><a href="#Used-packages" class="headerlink" title="Used packages"></a>Used packages</h2><p><code>straight-use-package</code> で入れているパッケージを書く．</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">;; company</span><br><span class="line">(straight-use-package &apos;company)</span><br><span class="line">(use-package company)</span><br><span class="line">(global-company-mode)</span><br><span class="line">(setq company-idle-delay 0)</span><br><span class="line">(setq company-minimum-prefix-length 2)</span><br><span class="line">(setq company-selection-wrap-around t)</span><br><span class="line"></span><br><span class="line">;; neotree</span><br><span class="line">(straight-use-package &apos;neotree)</span><br><span class="line">(use-package neotree)</span><br><span class="line">(global-set-key [f8] &apos;neotree-toggle)</span><br><span class="line"></span><br><span class="line">;; undo-tree</span><br><span class="line">(straight-use-package &apos;undo-tree)</span><br><span class="line">(use-package undo-tree)</span><br><span class="line">(global-undo-tree-mode t)</span><br><span class="line">(global-set-key (kbd &quot;M-/&quot;) &apos;undo-tree-redo)</span><br><span class="line"></span><br><span class="line">;; projectile</span><br><span class="line">(straight-use-package &apos;projectile)</span><br><span class="line">(projectile-global-mode)</span><br><span class="line"></span><br><span class="line">;; multiple-cursors</span><br><span class="line">(straight-use-package &apos;multiple-cursors)</span><br><span class="line">(straight-use-package &apos;smartrep)</span><br><span class="line">(use-package multiple-cursors)</span><br><span class="line">(use-package smartrep)</span><br><span class="line">(declare-function smartrep-define-key &quot;smartrep&quot;)</span><br><span class="line">(global-set-key (kbd &quot;C-M-c&quot;) &apos;mc/edit-lines)</span><br><span class="line">(global-set-key (kbd &quot;C-M-r&quot;) &apos;mc/mark-all-in-region)</span><br><span class="line">(global-unset-key &quot;\C-t&quot;)</span><br><span class="line">(smartrep-define-key global-map &quot;C-t&quot;</span><br><span class="line">  &apos;((&quot;C-t&quot;      . &apos;mc/mark-next-like-this)</span><br><span class="line">    (&quot;n&quot;        . &apos;mc/mark-next-like-this)</span><br><span class="line">    (&quot;p&quot;        . &apos;mc/mark-previous-like-this)</span><br><span class="line">    (&quot;m&quot;        . &apos;mc/mark-more-like-this-extended)</span><br><span class="line">    (&quot;u&quot;        . &apos;mc/unmark-next-like-this)</span><br><span class="line">    (&quot;U&quot;        . &apos;mc/unmark-previous-like-this)</span><br><span class="line">    (&quot;s&quot;        . &apos;mc/skip-to-next-like-this)</span><br><span class="line">    (&quot;S&quot;        . &apos;mc/skip-to-previous-like-this)</span><br><span class="line">    (&quot;*&quot;        . &apos;mc/mark-all-like-this)</span><br><span class="line">    (&quot;d&quot;        . &apos;mc/mark-all-like-this-dwim)</span><br><span class="line">    (&quot;i&quot;        . &apos;mc/insert-numbers)</span><br><span class="line">    (&quot;o&quot;        . &apos;mc/sort-regions)</span><br><span class="line">    (&quot;O&quot;        . &apos;mc/reverse-regions)))</span><br></pre></td></tr></table></figure>

<ul>
<li><code>company</code> : 補完用パッケージ</li>
<li><code>neotree</code> : CurrentDirectory をプロジェクト風に表示する</li>
<li><code>projectile</code> : Git管理されているディレクトリ内をファイル名などで検索できる．<code>M-x M-f</code> によるファイル検索の代わりに，<code>C-c C-p f</code> でファイル名の一部などヒットしたファイルを瞬時に開けるようにしている．</li>
<li><code>multiple-cursors</code> + <code>smartrep</code> : 複数 Caret を配置して同時に文字列操作できる．（エディタで一番欲しい機能はこれかもしれない）</li>
</ul>
<p>その他，開発環境に合わせた <code>*-mode</code> 系のパッケージを設定している．</p>
<h2 id="iTerm2-x-Ricty-Font"><a href="#iTerm2-x-Ricty-Font" class="headerlink" title="iTerm2 x Ricty Font"></a>iTerm2 x Ricty Font</h2><p>iTerm2 で Emacs を起動している．プロファイルのフォント設定は <a href="http://www.rs.tus.ac.jp/yyusa/ricty.html" target="_blank" rel="noopener">プログラミング用フォント Ricty</a>を使っている．英字と日本語が並んだときに違和感がなく気に入っている．<br>tmux はまだ必要に駆られていないが，どこかのタイミングで使ってみたいと思っている．</p>
<h2 id="Vim-ではなく-Emacs-で"><a href="#Vim-ではなく-Emacs-で" class="headerlink" title="Vim ではなく Emacs で"></a>Vim ではなく Emacs で</h2><p>なんとなく身近には Vim 勢が多い気がしていたので，とある案件で Python 開発するときに，Vim と Emacs 両方で開発してみた．結果，Vim のモード切り替えが辛すぎて結局は Emacs に戻ってきてしまった．</p>
</div></article></div></main><footer><div class="share-buttons"><ul class="share-buttons-list"><li class="share-buttons-list-item"><a data-fullpath="https://blog.tanaka.world/emacs-2018/index.html" href="https://twitter.com/intent/tweet?text=Emacs の設定を見直しした&amp;url=https://blog.tanaka.world/emacs-2018/&amp;via=_tanakaworld" onclick="window.open(https://blog.tanaka.world/emacs-2018/, 'twitter-share', 'width=550,height=235');return false;" target="_blank" class="icon icon-twitter"><img src="/images/icon-twitter.svg"></a></li><li class="share-buttons-list-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.tanaka.world/emacs-2018/" data-fullpath="https://blog.tanaka.world/emacs-2018/index.html" onclick="window.open(https://blog.tanaka.world/emacs-2018/, 'facebook-share','width=580,height=296');return false;" target="_blank" class="icon icon-facebook"><img src="/images/icon-facebook.svg"></a></li><!--li.share-buttons-list-item--><!--    a.icon.icon-pocket(data-fullpath=url href="https://getpocket.com/edit?url=#{share_url}&title=#{title}" onclick="window.open(#{share_url}, 'google-plus-share', 'width=490,height=530');return false;" target="_blank")--><!--        img(src="/images/icon-twitter.svg")--><li class="share-buttons-list-item"><a data-fullpath="https://blog.tanaka.world/emacs-2018/index.html" href="https://plus.google.com/share?url=https://blog.tanaka.world/emacs-2018/" onclick="window.open(https://blog.tanaka.world/emacs-2018/, 'google-plus-share', 'width=490,height=530');return false;" target="_blank" class="icon icon-google-plus"><img src="/images/icon-google-plus.svg"></a></li></ul></div><div class="paginator"><a href="/rails-generate-ogp/" class="prev">&laquo; PREV</a><a href="/jetbrains-toolbox/" class="next">NEXT &raquo;</a></div><div class="copyright"><p>© 2014 - 2021 <a href="https://blog.tanaka.world">tanakaworld</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/tanakaworld/hexo-theme-apollo" target="_blank">Forked of hexo-theme-apollo</a>.</p></div></footer></div><!--script(async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous")--><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-122034388-1",'auto');ga('send','pageview');</script></body></html>